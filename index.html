<!DOCTYPE html>
<html lang="hr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Turistiƒçki informator ‚Äì TZ Valpovo</title>

<style>
body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
background:#f4f6f9;
display:flex;
flex-direction:column;
height:100vh;
}

header{
background:linear-gradient(135deg,#294b8f,#3f67b2);
color:white;
padding:14px 24px;
display:flex;
align-items:center;
gap:18px;
}

header img{
height:64px;
}

header h1{
margin:0;
font-size:22px;
font-weight:600;
}

header span{
font-size:14px;
opacity:.9;
}

main{
flex:1;
display:flex;
flex-direction:column;
max-width:1200px;
margin:auto;
width:100%;
}

#chat{
flex:1;
overflow-y:auto;
padding:30px;
}

.row{
display:flex;
margin-bottom:18px;
align-items:flex-start;
}

.user-row{
justify-content:flex-end;
}

.avatar{
width:40px;
height:40px;
border-radius:50%;
background:#294b8f;
color:white;
display:flex;
align-items:center;
justify-content:center;
font-weight:bold;
margin-right:10px;
flex-shrink:0;
}

.user-row .avatar{
margin-left:10px;
margin-right:0;
background:#3f67b2;
}

.message{
max-width:85%;
padding:16px 20px;
border-radius:14px;
line-height:1.6;
font-size:16px;
background:white;
box-shadow:0 4px 12px rgba(0,0,0,0.06);
}

.user{
background:#3f67b2;
color:white;
}

.message h3{
margin-top:0;
margin-bottom:10px;
color:#294b8f;
}

.message ul{
padding-left:22px;
margin-top:8px;
margin-bottom:8px;
}

.message li{
margin-bottom:6px;
}

.quick{
display:flex;
gap:10px;
padding:12px 30px;
flex-wrap:wrap;
}

.quick button{
border:none;
padding:8px 16px;
border-radius:20px;
background:#e3e8f2;
cursor:pointer;
font-size:14px;
}

.quick button:hover{
background:#d3dbeb;
}

.input-area{
display:flex;
gap:10px;
padding:20px 30px;
border-top:1px solid #ddd;
background:white;
}

input{
flex:1;
padding:14px;
border-radius:8px;
border:1px solid #ccc;
font-size:15px;
}

button.send{
background:#294b8f;
color:white;
border:none;
padding:12px 22px;
border-radius:8px;
cursor:pointer;
}

button.send:hover{
background:#1f3a72;
}

footer{
text-align:center;
padding:14px;
font-size:13px;
color:#666;
background:#f4f6f9;
}
</style>
</head>

<body>

<header>
<img src="tz-logo-Valpovo.png" alt="Turistiƒçka zajednica grada Valpova"/>
<div>
<h1>Turistiƒçki informator</h1>
<span>Turistiƒçka zajednica grada Valpova</span>
</div>
</header>

<main>

<div id="chat">
<div class="row">
<div class="avatar">AI</div>
<div class="message">
<strong>Dobrodo≈°li!</strong><br><br>
Postavite pitanje ili odaberite opciju:
</div>
</div>
</div>

<div class="quick">
<button onclick="quick('Koje su znamenitosti u Valpovu?')">üèõ Znamenitosti</button>
<button onclick="quick('Preporuƒçi gastronomiju u Valpovu')">üçΩ Gastro</button>
<button onclick="quick('Koja su aktualna dogaƒëanja u Valpovu?')">üéâ Dogaƒëanja</button>
<button onclick="quick('≈†to raditi u Valpovu kada je lo≈°e vrijeme?')">üåß Lo≈°e vrijeme</button>
</div>

<div class="input-area">
<input id="input" placeholder="Postavite pitanje..." />
<button class="send" onclick="send()">Po≈°alji</button>
</div>

</main>

<footer>
¬© Turistiƒçka zajednica grada Valpova ‚Äì Digitalni informator
</footer>

<script>
const chat=document.getElementById("chat");

function formatResponse(text){

text=text.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");
text=text.replace(/### (.*?)(\n|$)/g,"<h3>$1</h3>");

if(text.includes(" - ")){
let items=text.split(" - ");
let formatted="<ul>";
items.forEach(i=>{
formatted+="<li>"+i.trim()+"</li>";
});
formatted+="</ul>";
text=formatted;
}

return text;
}

function addMessage(text,isUser=false){

const row=document.createElement("div");
row.className="row"+(isUser?" user-row":"");

const avatar=document.createElement("div");
avatar.className="avatar";
avatar.textContent=isUser?"VI":"AI";

const msg=document.createElement("div");
msg.className="message "+(isUser?"user":"bot");

msg.innerHTML=isUser?text:formatResponse(text);

if(isUser){
row.appendChild(msg);
row.appendChild(avatar);
}else{
row.appendChild(avatar);
row.appendChild(msg);
}

chat.appendChild(row);

setTimeout(()=>{
chat.scrollTop=chat.scrollHeight;
},50);
}

async function send(){
const input=document.getElementById("input");
const text=input.value.trim();
if(!text)return;

addMessage(text,true);
input.value="";

const response=await fetch("/api/chat",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({message:text})
});

const data=await response.json();
addMessage(data.reply,false);
}

function quick(text){
document.getElementById("input").value=text;
send();
}

document.getElementById("input").addEventListener("keypress",function(e){
if(e.key==="Enter")send();
});
</script>

</body>
</html>
